var TokFoxClient=function(){function t(t,o,n,e){var s={};s.uri=r+"/account/",s.method="POST",s.body={},s.body.alias={},s.body.alias.type=t,s.body.alias.value=o,s.body.pushEndpoint=n,i(s,function(t,o){e&&"function"==typeof e&&e(t,o)})}function o(t,o,n){var e={};e.uri=r+"/session/",e.method="POST",e.body={},t&&(e.body.role=t),o&&(e.body.sesssioId=o),i(e,function(t,o){n&&"function"==typeof n&&n(t,o)})}function n(t,o,n,e){var s={};s.uri=r+"/session/invitation/",s.method="POST",s.body={},s.body.alias={},s.body.alias.type=t,s.body.alias.value=o,s.body.sessionId=n,i(s,function(t,o){e&&"function"==typeof e&&e(t,o)})}function e(t,o){var n={};n.uri=r+"/session/invitation/"+t,n.method="GET",n.body={},i(n,function(t,n){o&&"function"==typeof o&&o(t,n)})}function i(t,o){var n=null,e=null;a&&s("options is "+JSON.stringify(t));var i=new XMLHttpRequest({mozSystem:!0});i.open(t.method,t.uri,!0),i.onreadystatechange=function(){if(4===i.readyState){try{e=JSON.parse(i.responseText)}catch(t){}200!==i.status&&(n=e||{},n.status=i.status,n.statusText=i.statusText,e=null),a&&(s("result is "+JSON.stringify(e)),s("error is "+JSON.stringify(n))),o&&"function"==typeof o&&o(n,e)}},i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(t.body))}function s(t){a&&console.log(t)}var u="http://tokfox.herokuapp.com",a=!1,r=u;return{debug:a,rootUrl:r,createSession:o,invite:n,acceptInvitation:e,createAccount:t}}();if("undefined"==typeof module&&window)window.TokFoxClient=TokFoxClient;else{var XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;module.exports=TokFoxClient}